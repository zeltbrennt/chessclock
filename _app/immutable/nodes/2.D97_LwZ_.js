var xe=Object.defineProperty;var ye=(n,e,t)=>e in n?xe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var X=(n,e,t)=>ye(n,typeof e!="symbol"?e+"":e,t);import"../chunks/CWj6FrbW.js";import{af as Ce,j as Ae,F as W,k as E,x as Be,m as Ee,P as a,O as Te,B as ke,C as Ie,D as $,G as K,w as Y,a6 as Me,a9 as Re,I as ue,q as fe,J as Ne,as as Q,ad as oe,a4 as ee,at as ze,V as De,au as te,av as Oe,aw as He,ac as Se,ax as pe,v as qe,ay as Le,az as Ve,a7 as Xe,i as Ye,ag as ce,an as U,ao as F,A as q,ah as ve,ap as k,aq as B,aA as ne,z as Fe,ar as z,aB as D,aC as J,S as Ge,u as Je,T as g}from"../chunks/BTA0q40v.js";import{d as de,s as O}from"../chunks/C67mDYFB.js";import{p as Pe,i as ae}from"../chunks/rO9wECA6.js";function Ue(n,e){return e}function We(n,e,t,r){for(var o=[],s=e.length,l=0;l<s;l++)He(e[l].e,o,!0);var f=s>0&&o.length===0&&t!==null;if(f){var _=t.parentNode;Se(_),_.append(t),r.clear(),R(n,e[0].prev,e[s-1].next)}pe(o,()=>{for(var c=0;c<s;c++){var i=e[c];f||(r.delete(i.k),R(n,i.prev,i.next)),qe(i.e,!f)}})}function Ke(n,e,t,r,o,s=null){var l=n,f={flags:e,items:new Map,first:null};{var _=n;l=E?W(Be(_)):_.appendChild(Ce())}E&&Ee();var c=null,i=!1,b=Te(()=>{var u=t();return Ye(u)?u:u==null?[]:oe(u)});Ae(()=>{var u=a(b),v=u.length;if(i&&v===0)return;i=v===0;let d=!1;if(E){var x=ke(l)===Ie;x!==(v===0)&&(l=$(),W(l),K(!1),d=!0)}if(E){for(var y=null,m,h=0;h<v;h++){if(Y.nodeType===Me&&Y.data===Re){l=Y,d=!0,K(!1);break}var C=u[h],w=r(C,h);m=me(Y,f,y,null,C,w,h,o,e,t),f.items.set(w,m),y=m}v>0&&W($())}E||Qe(u,f,l,o,e,r,t),s!==null&&(v===0?c?ue(c):c=fe(()=>s(l)):c!==null&&Ne(c,()=>{c=null})),d&&K(!0),a(b)}),E&&(l=Y)}function Qe(n,e,t,r,o,s,l){var f=n.length,_=e.items,c=e.first,i=c,b,u=null,v=[],d=[],x,y,m,h;for(h=0;h<f;h+=1){if(x=n[h],y=s(x,h),m=_.get(y),m===void 0){var C=i?i.e.nodes_start:t;u=me(C,e,u,u===null?e.first:u.next,x,y,h,r,o,l),_.set(y,u),v=[],d=[],i=u.next;continue}if(Ze(m,x,h),(m.e.f&Q)!==0&&ue(m.e),m!==i){if(b!==void 0&&b.has(m)){if(v.length<d.length){var w=d[0],T;u=w.prev;var H=v[0],S=v[v.length-1];for(T=0;T<v.length;T+=1)re(v[T],w,t);for(T=0;T<d.length;T+=1)b.delete(d[T]);R(e,H.prev,S.next),R(e,u,H),R(e,S,w),i=w,u=S,h-=1,v=[],d=[]}else b.delete(m),re(m,i,t),R(e,m.prev,m.next),R(e,m,u===null?e.first:u.next),R(e,u,m),u=m;continue}for(v=[],d=[];i!==null&&i.k!==y;)(i.e.f&Q)===0&&(b??(b=new Set)).add(i),d.push(i),i=i.next;if(i===null)continue;m=i}v.push(m),u=m,i=m.next}if(i!==null||b!==void 0){for(var p=b===void 0?[]:oe(b);i!==null;)(i.e.f&Q)===0&&p.push(i),i=i.next;var I=p.length;if(I>0){var G=f===0?t:null;We(e,p,G,_)}}ee.first=e.first&&e.first.e,ee.last=u&&u.e}function Ze(n,e,t,r){ze(n.v,e),n.i=t}function me(n,e,t,r,o,s,l,f,_,c){var i=(_&Le)!==0,b=(_&Ve)===0,u=i?b?De(o,!1,!1):te(o):o,v=(_&Oe)===0?l:te(l),d={i:v,v:u,k:s,a:null,e:null,prev:t,next:r};try{return d.e=fe(()=>f(n,u,v,c),E),d.e.prev=t&&t.e,d.e.next=r&&r.e,t===null?e.first=d:(t.next=d,t.e.next=d.e),r!==null&&(r.prev=d,r.e.prev=d.e),d}finally{}}function re(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,o=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==r;){var l=Xe(s);o.before(s),s=l}}function R(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const le=[...` 	
\r\fÂ \v\uFEFF`];function je(n,e,t){var r=n==null?"":""+n;if(t){for(var o in t)if(t[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,l=0;(l=r.indexOf(o,l))>=0;){var f=l+s;(l===0||le.includes(r[l-1]))&&(f===r.length||le.includes(r[f]))?r=(l===0?"":r.substring(0,l))+r.substring(f+1):l=f}}return r===""?null:r}function $e(n,e){return n==null?null:String(n)}function P(n,e,t,r,o,s){var l=n.__className;if(E||l!==t||l===void 0){var f=je(t,r,s);(!E||f!==n.getAttribute("class"))&&(f==null?n.removeAttribute("class"):n.className=f),n.__className=t}else if(s&&o!==s)for(var _ in s){var c=!!s[_];(o==null||c!==!!o[_])&&n.classList.toggle(_,c)}return s}function et(n,e,t,r){var o=n.__style;if(E||o!==e){var s=$e(e);(!E||s!==n.getAttribute("style"))&&(s==null?n.removeAttribute("style"):n.style.cssText=s),n.__style=e}return r}var tt=(n,e)=>{e.time>0&&e.onClick()},nt=U(" <span> </span> <!>",1),at=U("<button><!></button>");function ie(n,e){ce(e,!0);let t=Pe(e,"rotated",3,!1),r=D(()=>Math.floor(e.time%60)),o=D(()=>Math.floor(e.time/60)),s=D(()=>Math.floor(e.time%60*10%10));const l=45;var f=at();f.__click=[tt,e];let _;var c=k(f);{var i=u=>{var v=ne("X");q(u,v)},b=u=>{var v=nt(),d=Fe(v),x=z(d),y=k(x,!0);B(x);var m=z(x,2);{var h=C=>{var w=ne();F(()=>O(w,`.${a(s)??""}`)),q(C,w)};ae(m,C=>{e.time<l&&C(h)})}F(()=>{O(d,`${a(o)??""}:`),et(x,`--value:${a(r)??""}`),O(y,a(r))}),q(u,v)};ae(c,u=>{e.time<=0?u(i):u(b,!1)})}B(f),F(u=>{_=P(f,1,"btn w-full flex-1 my-5 text-7xl font-mono countdown rounded-2xl",null,_,u),f.disabled=!e.active&&e.countdownRunning},[()=>({"rotate-180":t(),"btn-primary":e.active&&e.time>=l&&e.mode=="Rapid","btn-accent":e.active&&e.time>=l&&e.mode=="Blitz","btn-secondary":e.active&&e.time>=l&&e.mode=="Bullet","btn-warning":e.active&&e.time<l&&e.time>0,"btn-error":e.time<=0})]),q(n,f),ve()}de(["click"]);class A{constructor(e){X(this,"minutes");X(this,"increment");X(this,"name");X(this,"mode");const[t,r]=e.split("+").map(o=>parseInt(o));this.minutes=t,this.increment=r,this.name=e,t<3?this.mode="Bullet":t<10?this.mode="Blitz":t<30?this.mode="Rapid":this.mode="Classical"}}function se(){var n;(n=document.getElementById("timeControlModal"))==null||n.showModal()}var rt=(n,e,t,r)=>{g(e,a(t),!0),r()},lt=U("<button> </button>"),it=(n,e,t,r)=>a(e)?t():r(),st=U('<div class="flex flex-col p-5 h-screen items-center justify-center"><!> <div class="flex flex-row justify-between"><button class="btn mx-3"> </button> <dialog id="timeControlModal" class="modal"><div class="modal-box"><form method="dialog"></form></div></dialog> <button> </button> <button> </button></div> <!></div>');function dt(n,e){ce(e,!0);let t=J(Ge(new A("0+0"))),r=D(()=>a(t).minutes),o=D(()=>a(t).increment),s=D(()=>a(r)*60),l=D(()=>a(r)*60),f=J(!1),_=J(!1),c=J(!1),i;const b=[new A("1+0"),new A("2+1"),new A("3+0"),new A("3+2"),new A("5+0"),new A("5+3"),new A("10+0"),new A("10+5"),new A("15+10"),new A("30+0"),new A("45+0")];Je(()=>{(a(s)<=0||a(l)<=0)&&g(c,!1)});function u(M){g(c,!0),v(),M==="A"?(g(f,!0),g(_,!1),g(s,a(s)+a(o))):(g(f,!1),g(_,!0),g(l,a(l)+a(o))),i=setInterval(()=>{a(f)&&a(s)>0?(g(s,a(s)-.1),a(s)<=0&&v()):a(_)&&a(l)>0&&(g(l,a(l)-.1),a(l)<=0&&v())},100)}function v(){g(f,!1),g(_,!1),i&&(clearInterval(i),i=void 0)}function d(M){M==="A"?u("B"):M==="B"&&u("A")}function x(){g(c,!1),g(s,a(r)*60),g(l,a(r)*60),v()}function y(){g(c,!a(c)),i&&(clearInterval(i),i=void 0)}var m=st(),h=k(m);ie(h,{rotated:!0,get time(){return a(s)},get active(){return a(f)},onClick:()=>d("A"),get countdownRunning(){return a(c)},get mode(){return a(t).mode}});var C=z(h,2),w=k(C);w.__click=[se];var T=k(w,!0);B(w);var H=z(w,2),S=k(H),p=k(S);Ke(p,21,()=>b,Ue,(M,N)=>{var V=lt();let j;V.__click=[rt,t,N,x];var ge=k(V,!0);B(V),F(we=>{j=P(V,1,"btn btn-soft w-full my-1",null,j,we),O(ge,a(N).name)},[()=>({"btn-secondary":a(N).mode=="Bullet","btn-accent":a(N).mode=="Blitz","btn-primary":a(N).mode=="Rapid"})]),q(M,V)}),B(p),B(S),B(H);var I=z(H,2);I.__click=[se];let G;var _e=k(I);B(I);var L=z(I,2);let Z;L.__click=[it,c,y,x];var he=k(L,!0);B(L),B(C);var be=z(C,2);ie(be,{get time(){return a(l)},get active(){return a(_)},onClick:()=>d("B"),get countdownRunning(){return a(c)},get mode(){return a(t).mode}}),B(m),F((M,N)=>{w.hidden=a(t).name!=="0+0",O(T,a(t).name==="0+0"?"Choose Time Control":a(t).name),I.hidden=a(t).name==="0+0",I.disabled=a(c),G=P(I,1,"btn btn-ghost mr-5",null,G,M),O(_e,`${a(t).mode??""}: ${a(t).name??""}`),Z=P(L,1,"btn btn-soft btn-accent",null,Z,N),L.hidden=a(t).name==="0+0",O(he,a(c)?"pause":"reset")},[()=>({"btn-secondary":a(t).mode=="Bullet","btn-accent":a(t).mode=="Blitz","btn-primary":a(t).mode=="Rapid"}),()=>({"btn-error":!a(c)})]),q(n,m),ve()}de(["click"]);export{dt as component};
